<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReWrap | Home</title>
    <link rel="stylesheet" href="variables.css">
    <link rel="stylesheet" href="nav_styles.css">
    <link rel="stylesheet" href="home_styles.css">
    <link rel="stylesheet" href="main_styles.css">
    <link rel="stylesheet" href="footer_styles.css">
    <link rel="stylesheet" href="arrow_styles.css">
    <link rel="shortcut icon" href="assets/site_icon.ico">
</head>
<body onload="testImage('showcaseImg')" onscroll="hideText()">
    <!-- Nav bar -->
    <div id="navContainer">
        <img id="navLogo" src="ui_images/nav_logo.svg" alt="ReWrap Logo" onclick="scrollToSection('showcaseBackground')">
        <ul>
            <li id="whatnewLI"><a onclick="scrollToSection('whatnewBox')">What's New</a></li>
            <li id="customLI"><a onclick="scrollToSection('customBox')">Custom</a></li>
            <li id="presetsLI"><a onclick="scrollToSection('presetsBox')">Presets</a></li>
            <li id="stickersLI"><a onclick="scrollToSection('stickersBox')">Stickers</a></li>
        </ul>
        <div id="helpIcon" onmousedown="redirect('help.html', event)"><p>?</p></div>
    </div>

    <!-- Animated showcase div -->
    <div id="showcaseBackground">
        <img onload="fadeImage('showcaseImg')" id="showcaseImg" class="transparentIMG" src="ui_images/scrolling_phones.png" alt="phone animation">
        <div id="showcaseText">
            <h1>ReWrap</h1>
            <p>Limitless possibilities</p>

            <div class="arrows">
                <span id="scrollHint">Scroll down for more</span>
                <svg id="more-arrows" onclick="scrollToSection('whatnewBox')">
                <polygon class="arrow-top" points="37.6,27.9 1.8,1.3 3.3,0 37.6,25.3 71.9,0 73.7,1.3 "/>
                <polygon class="arrow-middle" points="37.6,45.8 0.8,18.7 4.4,16.4 37.6,41.2 71.2,16.4 74.5,18.7 "/>
                <polygon class="arrow-bottom" points="37.6,64 0,36.1 5.1,32.8 37.6,56.8 70.4,32.8 75.5,36.1 "/>
                </svg>
            </div>
        </div>
    </div>

    <!-- About our business -->
    <div id="companyInfoContainer">
        <div class="infoSection">
            <img src="ui_images/nz_icon.svg" alt="NZ">
            <div>
                <h2>Locally Based</h2>
                <p>Manufactured in New Zealand to give you free shipping nationwide.</p>
            </div>
        </div>
        <div class="infoSection" id="middleInfoSection">
            <img src="ui_images/customisable_icon.svg" alt="Customisable">
            <div>
                <h2>Customisable</h2>
                <p>Our wraps are fully customisable, create your own or choose from our many pre-made designs.</p>
            </div>
        </div>
        <div class="infoSection">
            <img src="ui_images/materials_icon.svg" alt="Materials">
            <div>
                <h2>Materials</h2>
                <p>All our wraps are made from durable vinyl, which leaves no residue when peeled off.</p>
            </div>
        </div>
    </div>

    <!-- Parallax scrolling section -->
    <div id="whatnewBox" class="parallaxContainer textLeft">
        <div class="textDiv">
            <h2 id="whatnewText">What's new</h2>
            <p>Check out our latest releases and company updates</p>
            <div><a href="new.html">LEARN MORE</a></div>
        </div>
        <div id="imgDiv1" class="imgDiv parallaxWindow"></div>
    </div>
    <div id="customBox" class="parallaxContainer textRight">
        <div id="imgDiv2" class="imgDiv parallaxWindow"></div>
        <div class="textDiv">
            <h2 id="customText">Custom</h2>
            <p>Turn the back of your phone into whatever your heart desires with a custom designed phone wrap</p>
            <div><a href="phone_selection.html?type=custom">SHOP HERE</a></div>
        </div>
    </div>
    <div id="presetsBox" class="parallaxContainer textLeft">
        <div class="textDiv">
            <h2 id="presetsText">Presets</h2>
            <p>Are you lacking creativity? Do you have a more refined taste? Try one of our pre-designed wraps</p>
            <div><a href="phone_selection.html?type=presets">COMING SOON</a></div>
        </div>
        <div id="imgDiv3" class="imgDiv parallaxWindow"></div>
    </div>
    <div id="stickersBox" class="parallaxContainer textRight">
        <div id="imgDiv4" class="imgDiv parallaxWindow"></div>
        <div class="textDiv">
            <h2 id="stickersText">Stickers</h2>
            <p>A product for your laptop, or friend's forehead</p>
            <div><a href="stickers.html">COMING SOON</a></div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footerContainer">
        <div id="footerSocials">
            <h1>Our Socials: </h1>
            <div>
                <a href="https://www.instagram.com/rewrap_nz/" target="_blank" rel="noreferrer noopener" title="@rewrap_nz">
                    <img src="ui_images/instagram_logo.svg" alt="Intagram Logo">
                </a>
                <a onclick="emailPrompt()" title="rewrapvinyl@gmail.com">
                    <img src="ui_images/mail_icon.svg" alt="Mail Icon">
                </a>
            </div>
            <input type="text" value="rewrapvinyl@gmail.com" id="hiddenEmail" readonly>
        </div>
    </div>

    <!--#########-->
    <!-- Scripts -->
    <!--#########-->

    <!-- 2-stage animation for fading in then moving image -->
    <script>
        // Step 1: Fade in image when file loads
        function fadeImage(element) {
            var image = document.getElementById(element);
            if(!image.classList.contains("fadeIn")) {
                document.getElementById("more-arrows").classList.add("preLoad");
                image.classList.add("fadeIn");
                image.addEventListener("animationend", startScrolling);
                // startScrolling();
            }
        }
        // Step 2: Begin scrolling animation
        function startScrolling() {
            document.getElementById("more-arrows").classList.remove("preLoad");
            showcaseImg = document.getElementById("showcaseImg");
            if(!showcaseImg.classList.contains("scrollImage")) {
                showcaseImg.classList.remove("transparentIMG");
                showcaseImg.classList.add("scrollImage");
            }
        }

        function testImage(element) {
            var image = document.getElementById(element);
            var isLoaded = image.complete && image.naturalHeight !== 0;
            if(isLoaded) {
                fadeImage(element);
            }
        }
    </script>


    <!-- Remove hint text -->
    <script>
        function hideText() {
            document.getElementById("scrollHint").style.visibility = "hidden";
        }
    </script>
    

    <!-- Scroll to section -->
    <script>
        function scrollToSection(targetSection) {
            item = document.getElementById(targetSection);
            item.scrollIntoView({behavior: "smooth", block: "end"});
        }
    </script>


    <!-- Change nav bar underline colour -->
    <script>
        document.addEventListener("scroll", changeUnderlines);

        function changeStyle(element, setSpecial) {
            if(setSpecial) {
                element.style.borderBottomColor = "var(--specialGreen)";
                element.firstChild.style.color = "var(--specialGreen)";
                element.firstChild.style.fontWeight = "600";
            } else {
                element.style.borderBottomColor = "#1A1A1A";
                element.firstChild.style.color = "white";
                element.firstChild.style.fontWeight = "500";
            }

        }

        function changeUnderlines() {
            var li = document.getElementById("whatnewLI");
            if(isInViewport(document.getElementById("whatnewText"))) {
                changeStyle(li, true);
                li.firstChild.setAttribute("href", "new.html");
            } else {
                changeStyle(li, false);
                li.firstChild.removeAttribute("href");
            }

            li = document.getElementById("customLI");
            if(isInViewport(document.getElementById("customText"))) {
                changeStyle(li, true);
                li.firstChild.setAttribute("href", "phone_selection.html?type=custom");
            } else {
                changeStyle(li, false);
                li.firstChild.removeAttribute("href");
            }

            li = document.getElementById("presetsLI");
            if(isInViewport(document.getElementById("presetsText"))) {
                changeStyle(li, true);
                li.firstChild.setAttribute("href", "phone_selection.html?type=presets");
            } else {
                changeStyle(li, false);
                li.firstChild.removeAttribute("href");
            }

            li = document.getElementById("stickersLI");
            if(isInViewport(document.getElementById("stickersText"))) {
                changeStyle(li, true);
                li.firstChild.setAttribute("href", "stickers.html");
            } else {
                changeStyle(li, false);
                li.firstChild.removeAttribute("href");
            }
        }

        function isInViewport(element) {
            const rect = element.getBoundingClientRect();
            return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
        }
    </script>


    <!-- Disable parallax on iOS -->
    <script>
        var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        var parallaxWindows = document.getElementsByClassName("parallaxWindow");

        if (isIOS) {
            for (item of parallaxWindows) {
                item.style.backgroundAttachment = "scroll";
            }
        } else {
            // Do nothing
        }
    </script>


    <script src="global_functions.js"></script>
</body>
</html>